{% extends 'base.html' %}

{% block title %}
Página Inicial - Meu Site
{% endblock %}

{% block content %}
<h1>Olá, {{ nome_usuario }}!</h1>
<h2>Minha Lista de Tarefas (do Banco de Dados):</h2>

<ul style="list-style: none; padding: 0;">
  {% for tarefa in tarefas %}
    <li style="margin-bottom: 15px; border: 1px solid #ccc; padding: 10px;">
      {{ tarefa.titulo }}

      {% if tarefa.concluida %}
        <strong style="color: green;">(✓ Concluída)</strong>
      {% else %}
        <strong style="color: orange;">(☐ Pendente)</strong>
      {% endif %}

      <br>
      <small>Criada em: {{ tarefa.criada_em|date:"d/m/Y H:i" }}</small>

      <div style="margin-top:10px;">

        <!-- DELETAR -->
        <form action="{% url 'deletar_tarefa' tarefa.pk %}" method="POST" style="display:inline;">
          {% csrf_token %}
          <button type="submit">Deletar</button>
        </form>

        <!-- CONCLUIR -->
        {% if not tarefa.concluida %}
        <form action="{% url 'concluir_tarefa' tarefa.pk %}" method="POST" style="display:inline;">
          {% csrf_token %}
          <button type="submit">Marcar como Concluída</button>
        </form>
        {% endif %}

      </div>

    </li>
  {% empty %}
    <li>Você ainda não tem tarefas cadastradas.</li>
  {% endfor %}
</ul>

<h3>Tecnologias que estou aprendendo:</h3>
<ul>
  {% for tec in tecnologias %}
    <li>{{ tec }}</li>
  {% empty %}
    <li>Nenhuma tecnologia cadastrada.</li>
  {% endfor %}
</ul>

{% if nome_usuario == 'Júnior' %}
  <p>Este é um conteúdo especial para o Júnior!</p>
{% endif %}

<hr>

<h2>Adicionar Nova Tarefa</h2>
<form method="POST">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Adicionar</button>
</form>

<hr>

<h2>Minha Lista de Tarefas (do Banco de Dados):</h2>
<ul>
  {% for tarefa in tarefas %}
    <li>
      {{ tarefa.titulo }}
      {% if tarefa.concluida %}
        (✓ Concluída)
      {% else %}
        (☐ Pendente)
      {% endif %}
      <br>
      <small>Criada em: {{ tarefa.criada_em }}</small>
    </li>
  {% empty %}
    <li>Você ainda não tem tarefas cadastradas.</li>
  {% endfor %}
</ul>

{% endblock %}
